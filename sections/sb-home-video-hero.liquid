<section class="home-video-hero">
  <video muted loop playsinline autoplay>
    <source src="{{ section.settings.video.sources[1].url }}" media="(min-width:768px)">
    <source src="{{ section.settings.video_mobile.sources[1].url }}" media="(max-width:768px)">
  </video>  
  {% if section.settings.button_url != blank %}
    <a href="{{ section.settings.button_url }}" class="btn">{{ section.settings.button_label }}</a>
  {% endif %}
</section>

{% schema %}
  {
    "name": "Home Video Hero",
    "settings": [
      {
        "id": "video",
        "type": "video",
        "label": "Video"
      },
      {
        "id": "video_mobile",
        "type": "video",
        "label": "Video Mobile"
      },
      {
        "id": "button_url",
        "type": "url",
        "label": "Button URL"
      },
      {
        "id": "button_label",
        "type": "text",
        "label": "Button Label"
      }
    ],
    "presets": [
      {
        "name": "Home Video Hero",
        "category": "saltbone"

      }
    ]
  }
{% endschema %}

{% stylesheet %}
  section.home-video-hero {
    position: relative;
    height: 800px;
    overflow: hidden;

    video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      z-index: 0;
    }

    a.btn {
      position: absolute;
      bottom: 45px;
      left: 50%;
      transform: translateX(-50%);
    }

    @media (max-width: 1200px) {
      height: 600px;
      .content-wrapper {
        padding: 0 25px;
        .product-image {
          right: 0;
          img {
            width: 300px;
          }
        }

        .content {
          padding: 45px;
          max-width: 700px;
        }
      }
    }

    @media (max-width: 768px) {
      height: 450px;
      .content-wrapper {
        .content {
          padding: 45px 25px;
          align-items: center;
          background-color: rgba(255,255,255,0.75);

          h1 {
            text-align: center;
          }
        }

        .product-image {
          right: -70px;

          img {
            width: 250px;
          }
        }
      }
    }


  }
{% endstylesheet %}

{% javascript %}
  document.addEventListener('scroll', function() {
    var img = document.querySelector('.home-video-hero .product-image img');
    if (!img) return;
    var scrolled = window.scrollY;
    var translateY = Math.max(-scrolled * 0.3, -300);
    img.style.transform = `translateY(${translateY}px)`;
  });
{% endjavascript %}